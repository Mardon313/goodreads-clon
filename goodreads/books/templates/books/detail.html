{% extends "base.html" %}
{% load crispy_forms_tags %}


{% block title %}Book Detail Page{% endblock %}

{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <div class="row mb-4">
        <div class="col-2">
            <img class="cover-pic" alt="cover image" src="{{ book.cover_picture.url }}">
        </div>
        <div class="col-6 ms-5">
            <h3>{{ book.title }}</h3>

            <p>
                {{ book.description }}
            </p>
        </div>

    </div>




<style>
    /* Radio tugmalarni butunlay yashirish */
    .star-rating input {
        display: none !important;
    }

    .star-rating {
        display: flex !important;
        flex-direction: row-reverse !important;
        justify-content: flex-end !important;
        gap: 10px;
        margin-bottom: 15px;
    }

    .star-rating label {
        font-size: 30px !important;
        color: #ddd; /* Kulrang */
        cursor: pointer;
    }

    /* Tanlangan yoki sichqoncha ustiga kelganda rang berish */
    .star-rating input:checked ~ label,
    .star-rating label:hover,
    .star-rating label:hover ~ label {
        color: #f39c12 !important; /* Oltin rang */
    }
</style>

<div class="row mb-4">
    <div class="col-6">
        <form method="post" action="{% url 'books:review' book.id %}">
            {% csrf_token %}

            <label>Stars given*</label>
            <div class="star-rating">
                <input type="radio" name="stars_given" value="5" id="star5"><label for="star5" class="fas fa-star"></label>
                <input type="radio" name="stars_given" value="4" id="star4"><label for="star4" class="fas fa-star"></label>
                <input type="radio" name="stars_given" value="3" id="star3"><label for="star3" class="fas fa-star"></label>
                <input type="radio" name="stars_given" value="2" id="star2"><label for="star2" class="fas fa-star"></label>
                <input type="radio" name="stars_given" value="1" id="star1"><label for="star1" class="fas fa-star"></label>
            </div>

        </form>
    </div>
</div>






    <div class="rov mb-4">
        <div class="col-6">
            <form method="post" action="{% url 'books:review' book.id %}">

                {% csrf_token %}
                {{ review_form | crispy }}

                <button class="btn btn-success">Add review</button>
            </form>

        </div>
    </div>
{% if book.bookreview_set.exists %}
    <h4>Reviews</h4> <hr>

    {% for review in book.bookreview_set.all %}
        <div class="row mb-3">
            <div class="col-1 me-4">
                <img class="small-profile-pic" src="{{ review.user.profile_picture.url }}">
            </div>
            <div class="col-7">
                <b>{{ review.user.username }}</b> rated it {{ review.stars_given }}stars <span class="fw-lighter">{{ review.created_at  }}</span>
                <p class="mt-2 font-monospace small">{{ review.comment  }}</p>

            </div>
        </div>
    {% endfor %}
{% endif %}

{% endblock %}
